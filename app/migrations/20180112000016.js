const mongo = require('../components/database/mongo');
const configuration = require('../components/configuration');
const Promise = require('bluebird');

const competenceLevels = [
  { name: 'Agricultural/Industrial Equipment 1' },
  { name: 'Agricultural/Industrial Equipment 2' },
  { name: 'Agricultural/Industrial Equipment 3' },
  { name: 'Architecture/Engineering 1' },
  { name: 'Architecture/Engineering 2' },
  { name: 'Architecture/Engineering 3' },
  { name: 'Automotive 1' },
  { name: 'Automotive 2' },
  { name: 'Automotive 3' },
  { name: 'Business/Financial 1' },
  { name: 'Business/Financial 2' },
  { name: 'Business/Financial 3' },
  { name: 'Chemistry 1' },
  { name: 'Chemistry 2' },
  { name: 'Chemistry 3' },
  { name: 'Cinema/Film/TV 1' },
  { name: 'Cinema/Film/TV 2' },
  { name: 'Cinema/Film/TV 3' },
  { name: 'Communication/Information Technology 1' },
  { name: 'Communication/Information Technology 2' },
  { name: 'Communication/Information Technology 3' },
  { name: 'Education/Training Materials 1' },
  { name: 'Education/Training Materials 2' },
  { name: 'Education/Training Materials 3' },
  { name: 'Electronics 1' },
  { name: 'Electronics 2' },
  { name: 'Electronics 3' },
  { name: 'Entertainment 1' },
  { name: 'Entertainment 2' },
  { name: 'Entertainment 3' },
  { name: 'Fashion/Beauty 1' },
  { name: 'Fashion/Beauty 2' },
  { name: 'Fashion/Beauty 3' },
  { name: 'Gastronomy 1' },
  { name: 'Gastronomy 2' },
  { name: 'Gastronomy 3' },
  { name: 'General/Other 1' },
  { name: 'General/Other 2' },
  { name: 'General/Other 3' },
  { name: 'Health Administration 1' },
  { name: 'Health Administration 2' },
  { name: 'Health Administration 3' },
  { name: 'Hospitality 1' },
  { name: 'Hospitality 2' },
  { name: 'Hospitality 3' },
  { name: 'Insurance 1' },
  { name: 'Insurance 2' },
  { name: 'Insurance 3' },
  { name: 'Legal/Law 1' },
  { name: 'Legal/Law 2' },
  { name: 'Legal/Law 3' },
  { name: 'Maritime/Naval 1' },
  { name: 'Maritime/Naval 2' },
  { name: 'Maritime/Naval 3' },
  { name: 'Marketing/Press 1' },
  { name: 'Marketing/Press 2' },
  { name: 'Marketing/Press 3' },
  { name: 'Media/Multimedia 1' },
  { name: 'Media/Multimedia 2' },
  { name: 'Media/Multimedia 3' },
  { name: 'Medical/Life Sciences 1' },
  { name: 'Medical/Life Sciences 2' },
  { name: 'Medical/Life Sciences 3' },
  { name: 'Politics/International affairs 1' },
  { name: 'Politics/International affairs 2' },
  { name: 'Politics/International affairs 3' },
  { name: 'Real Estate 1' },
  { name: 'Real Estate 2' },
  { name: 'Real Estate 3' },
  { name: 'Religion 1' },
  { name: 'Religion 2' },
  { name: 'Religion 3' },
  { name: 'Retail/Commercial  2' },
  { name: 'Retail/Commercial  3' },
  { name: 'Retail/Commercial 1' },
  { name: 'Social Sciences 1' },
  { name: 'Social Sciences 2' },
  { name: 'Social Sciences 3' },
  { name: 'Sports/Recreation 1' },
  { name: 'Sports/Recreation 2' },
  { name: 'Sports/Recreation 3' },
  { name: 'Technical 1' },
  { name: 'Technical 2' },
  { name: 'Technical 3' },
  { name: 'Travel/Tourism 1' },
  { name: 'Travel/Tourism 2' },
  { name: 'Travel/Tourism 3' },
  { name: 'Visual & Performance Arts 1' },
  { name: 'Visual & Performance Arts 2' },
  { name: 'Visual & Performance Arts 3' },
];

const migration = () => mongo.connect(configuration)
  .then(connections => connections.mongoose.connection)
  .then((db) => {
    const competenceLevelCollection = db.collection('competenceLevels');
    return Promise
      .map(competenceLevels, cl => competenceLevelCollection.update(cl, cl, { upsert: true }));
  });

if (require.main === module) {
  migration().then(() => process.exit(0)).catch((err) => { throw err; });
} else {
  module.exports = migration;
}
